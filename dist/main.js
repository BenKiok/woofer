(()=>{"use strict";const e=(()=>{function e(e){const t=e.querySelector(".interact"),a=e.querySelector("h3"),n=e.querySelector("h4");let o,r;t&&(t.childNodes[1].addEventListener("click",(()=>{firebase.database().ref("Woofs/").once("value",(e=>{const r=e.val();let d;for(const e in r)if(`${new Date(r[e].time)}`.slice(4,15)==n.innerText&&r[e].text==a.innerText){d=r[e];break}d?(o?d.fav--:d.fav++,o=!o,t.querySelectorAll(".inline")[1].innerText=d.fav,firebase.database().ref("Woofs/"+d.id).update(d)):alert("Error, could not find wolf.")}))})),t.childNodes[2].addEventListener("click",(()=>{firebase.database().ref("Woofs/").once("value",(e=>{const o=e.val();let d;for(const e in o)if(`${new Date(o[e].time)}`.slice(4,15)==n.innerText&&o[e].text==a.innerText){d=o[e];break}d?(r?d.rewoof--:d.rewoof++,r=!r,t.querySelectorAll(".inline")[2].innerText=d.rewoof,firebase.database().ref("Woofs/"+d.id).update(d)):alert("Error, could not find wolf.")}))})))}function t(t,a){const n=document.createElement("div"),o=document.createElement("span"),r=document.createElement("div"),d=document.createElement("div"),s=document.createElement("h4"),i=document.createElement("h3"),c=document.createElement("div");n.classList.add("woof","border"),o.classList.add("avatar"),r.classList.add("content"),d.classList.add("text"),c.classList.add("interact");for(let e=0;e<4;e++){const n=document.createElement("span"),o=document.createElement("i"),r=document.createElement("p");o.classList.add("click","fas",0===e?"fa-reply":1===e?"fa-retweet":2===e?"fa-heart":3===e?"fa-share-square":""),r.innerText=0===e?t[a].newWoof?t[a].newWoof.length:"0":1===e?t[a].fav:2===e?t[a].rewoof:"",r.classList.add("inline"),n.append(o,r),c.appendChild(n)}s.innerText=`${new Date(t[a].time)}`.slice(4,15),i.innerText=t[a].text,d.append(s,i),r.append(d,c),n.append(o,r),e(n),timeline.insertBefore(n,timeline.querySelector(".woof.border"))}return{writeWoof:e=>{let t;return!("object"!=typeof e||!e||(e.time=(new Date).getTime(),t=firebase.database().ref("/Woofs/").push(e).key,e.id=t,firebase.database().ref("/Woofs/"+t).update(e),0))},readWoofs:(e,t)=>{e.ref("/Woofs/").once("value",(e=>{t(e.val())}))},setNextWoof:(e,t)=>!(!e||!e.nextWoof&&null!==e.nextWoof)&&(t&&t.id?(e.nextWoof=t.id,firebase.database().ref("/Woofs/"+e.id).update(e),!0):void 0),addWoofListeners:e,renderAllWoofs:function(e){for(const a in e)t(e,a)},renderNewWoof:function(e){let a,n=[];for(const t in e)n.push(e[t]);a=n.length-1,t(n,a)},createWoofHTML:t,removeWoofs:function(e,t){const a=Array.from(t.childNodes);return a.forEach((t=>{t!=e&&(t.remove(),a.splice(a.indexOf(t),1))})),a.length<2}}})(),t=(()=>{const e=document.createElement("div"),t=document.createElement("span");for(let t=0;t<10;t++){const a=document.createElement("i");a.classList.add("click","fas",0===t?"fa-dog":1===t?"fa-home":2===t?"fa-search":3===t?"fa-bell":4===t?"fa-envelope":5===t?"fa-bookmark":6===t?"fa-file-alt":7===t?"fa-user":8===t?"fa-ellipsis-h":9===t?"avatar":""),e.appendChild(a)}return t.classList.add("avatar"),e.id="menu",e.appendChild(t),e})(),a=(()=>{const e=document.createElement("div"),t=document.createElement("h1");return e.id="head",e.classList.add("border"),t.innerText="Home",e.appendChild(t),e})(),n=(()=>{const e=document.createElement("div"),t=document.createElement("div"),a=document.createElement("div"),n=document.createElement("span"),o=document.createElement("div"),r=document.createElement("input"),d=document.createElement("div"),s=document.createElement("button"),i=document.createElement("div");e.id="timeline",t.id="main",t.classList.add("border"),a.classList.add("woof"),n.classList.add("avatar"),o.classList.add("content"),r.type="text",r.placeholder="What's happening?",r.classList.add("text"),r.id="input",d.classList.add("more"),s.innerText="Woof",s.classList.add("click"),i.classList.add("break");for(let e=0;e<5;e++){const t=document.createElement("i");t.classList.add("click","fas",0==e?"fa-camera":1==e?"fa-image":2==e?"fa-chart-bar":3==e?"fa-smile":4==e?"fa-calendar-alt":""),d.appendChild(t)}return d.appendChild(s),o.append(r,d),a.append(n,o),t.append(a,i),e.appendChild(t),e})();(()=>{const o=document.querySelector("#app");e.readWoofs(firebase.database(),e.renderAllWoofs),window.addEventListener("resize",(()=>{t.style.left=n.offsetLeft-72+"px"})),n.querySelector("button").addEventListener("click",(()=>{const t=n.querySelector("#input");if(t.value.length>0){const a={text:t.value,fav:0,rewoof:0};e.writeWoof(a)?(t.value="",e.readWoofs(firebase.database(),e.renderNewWoof)):alert("Unable to send woof. Try again in a few seconds.")}})),n.insertBefore(a,n.querySelector("#main")),o.append(t,n),t.style.left=n.offsetLeft-72+"px"})()})();