(()=>{"use strict";const e=e=>{let t;return!("object"!=typeof e||!e||(e.time=(new Date).getTime(),t=firebase.database().ref("/Woofs/").push(e).key,e.id=t,firebase.database().ref("/Woofs/"+t).update(e),0))},t=(e,t)=>{e.ref("/Woofs/").once("value",(e=>{t(e.val())}))},a=(()=>{const e=document.createElement("div"),t=document.createElement("span");for(let t=0;t<10;t++){const a=document.createElement("i");a.classList.add("click","fas",0===t?"fa-dog":1===t?"fa-home":2===t?"fa-search":3===t?"fa-bell":4===t?"fa-envelope":5===t?"fa-bookmark":6===t?"fa-file-alt":7===t?"fa-user":8===t?"fa-ellipsis-h":9===t?"avatar":""),e.appendChild(a)}return t.classList.add("avatar"),e.id="menu",e.appendChild(t),e})(),n=(()=>{const e=document.createElement("div"),t=document.createElement("h1");return e.id="head",e.classList.add("border"),t.innerText="Home",e.appendChild(t),e})(),d=(()=>{const e=document.createElement("div"),t=document.createElement("div"),a=document.createElement("div"),n=document.createElement("span"),d=document.createElement("div"),o=document.createElement("input"),r=document.createElement("div"),s=document.createElement("button"),c=document.createElement("div");e.id="timeline",t.id="main",t.classList.add("border"),a.classList.add("woof"),n.classList.add("avatar"),d.classList.add("content"),o.type="text",o.placeholder="What's happening?",o.classList.add("text"),o.id="input",r.classList.add("more"),s.innerText="Woof",s.classList.add("click"),c.classList.add("break");for(let e=0;e<5;e++){const t=document.createElement("i");t.classList.add("click","fas",0==e?"fa-camera":1==e?"fa-image":2==e?"fa-chart-bar":3==e?"fa-smile":4==e?"fa-calendar-alt":""),r.appendChild(t)}return r.appendChild(s),d.append(o,r),a.append(n,d),t.append(a,c),e.appendChild(t),e})();(()=>{const o=document.querySelector("#app");function r(e){let t,a=[];for(const t in e)a.push(e[t]);t=a.length-1,s(a,t)}function s(e,t){const a=document.createElement("div"),n=document.createElement("span"),o=document.createElement("div"),r=document.createElement("div"),s=document.createElement("h4"),c=document.createElement("h3"),i=document.createElement("div");let l,f;a.classList.add("woof","border"),n.classList.add("avatar"),o.classList.add("content"),r.classList.add("text"),i.classList.add("interact");for(let a=0;a<4;a++){const n=document.createElement("span"),d=document.createElement("i"),o=document.createElement("p");d.classList.add("click","fas",0===a?"fa-reply":1===a?"fa-retweet":2===a?"fa-heart":3===a?"fa-share-square":""),o.innerText=0===a?e[t].newWoof?e[t].newWoof.length:"0":1===a?e[t].fav:2===a?e[t].rewoof:"",o.classList.add("inline"),n.append(d,o),i.appendChild(n)}s.innerText=`${new Date(e[t].time)}`.slice(4,15),c.innerText=e[t].text,i.childNodes[1].addEventListener("click",(()=>{firebase.database().ref("Woofs/").once("value",(e=>{const t=e.val();let a;for(const e in t)if(`${new Date(t[e].time)}`.slice(4,15)==s.innerText&&t[e].text==c.innerText){a=t[e];break}a?(l?a.fav--:a.fav++,l=!l,i.querySelectorAll(".inline")[1].innerText=a.fav,firebase.database().ref("Woofs/"+a.id).update(a)):alert("Error, could not find wolf.")}))})),i.childNodes[2].addEventListener("click",(()=>{firebase.database().ref("Woofs/").once("value",(e=>{const t=e.val();let a;for(const e in t)if(`${new Date(t[e].time)}`.slice(4,15)==s.innerText&&t[e].text==c.innerText){a=t[e];break}a?(f?a.rewoof--:a.rewoof++,f=!f,i.querySelectorAll(".inline")[2].innerText=a.rewoof,firebase.database().ref("Woofs/"+a.id).update(a)):alert("Error, could not find wolf.")}))})),r.append(s,c),o.append(r,i),a.append(n,o),d.insertBefore(a,d.querySelector(".woof.border"))}t(firebase.database(),(function(e){for(const t in e)s(e,t)})),window.addEventListener("resize",(()=>{a.style.left=d.offsetLeft-72+"px"})),d.querySelector("button").addEventListener("click",(()=>{const a=d.querySelector("#input");if(a.value.length>0){const n={text:a.value,fav:0,rewoof:0};e(n)?(a.value="",t(firebase.database(),r)):alert("Unable to send woof. Try again in a few seconds.")}})),d.insertBefore(n,d.querySelector("#main")),o.append(a,d),a.style.left=d.offsetLeft-72+"px"})()})();