(()=>{"use strict";const e=(()=>{const e=document.createElement("div"),t=document.createElement("h1"),r=document.createElement("input"),o=document.createElement("input"),n=document.createElement("button"),a=document.createElement("button"),l=document.createElement("p");return e.classList.add("login"),t.innerText="Welcome to Woofer!",r.placeholder="Email",o.placeholder="Password",n.innerText="Login",n.classList.add("click"),a.innerText="Sign in with Google",a.classList.add("click"),l.innerText="First time? Create an account here",l.classList.add("click"),e.append(t,r,o,n,a,l),e})(),t=(()=>{const e=document.createElement("div"),t=document.createElement("h1"),r=document.createElement("input"),o=document.createElement("input"),n=document.createElement("button"),a=document.createElement("button"),l=document.createElement("p");return e.classList.add("login"),t.innerText="Sign Up",r.placeholder="Email",o.placeholder="Password",n.innerText="Sign Up",n.classList.add("click"),a.innerText="Sign up with Google",a.classList.add("click"),l.innerText="Regular user? Log in here",l.classList.add("click"),e.append(t,r,o,n,a,l),e})(),r=(()=>{function e(e,t,r){const o=document.createElement("div"),n=document.createElement("span"),a=document.createElement("div"),l=document.createElement("div"),c=document.createElement("h4"),d=document.createElement("h3"),i=document.createElement("div");o.classList.add("woof","border"),n.classList.add("avatar"),a.classList.add("content"),l.classList.add("text"),i.classList.add("interact");for(let r=0;r<4;r++){const o=document.createElement("span"),n=document.createElement("i"),a=document.createElement("p");n.classList.add("click","fas",0===r?"fa-reply":1===r?"fa-retweet":2===r?"fa-heart":3===r?"fa-share-square":""),a.innerText=0===r?e[t].nextWoof?e[t].nextWoof.length:"0":1===r?e[t].rewoof:2===r?e[t].fav:"",a.classList.add("inline"),o.append(n,a),i.appendChild(o)}c.innerText=`${new Date(e[t].time)}`.slice(4,15),d.innerText=e[t].text,l.append(c,d),a.append(l,i),o.append(n,a),r?timeline.appendChild(o):timeline.insertBefore(o,timeline.querySelector(".woof.border"))}return{writeWoof:e=>{let t;return!("object"!=typeof e||!e||(e.time=(new Date).getTime(),t=firebase.database().ref("/Woofs/").push(e).key,e.id=t,firebase.database().ref("/Woofs/"+t).update(e),0))},readWoofs:(e,t)=>{e.ref("/Woofs/").once("value",(e=>{t(e.val())}))},renderAllWoofs:function(t,r=!1){for(const o in t)e(t,o,r)},renderNewWoof:function(t){let r,o=[];for(const e in t)o.push(t[e]);r=o.length-1,e(o,r)},removeWoofs:function(e,t){const r={...t.querySelectorAll(".woof.border")};for(const t in r)r[t]!==e&&r[t].remove();return 1===Array.from(t.querySelectorAll(".woof.border")).length}}})(),o=(()=>{const e=document.createElement("div"),t=document.createElement("span");for(let t=0;t<9;t++){const r=document.createElement("i");r.classList.add("click","fas",0===t?"fa-dog":1===t?"fa-home":2===t?"fa-search":3===t?"fa-bell":4===t?"fa-envelope":5===t?"fa-bookmark":6===t?"fa-file-alt":7===t?"fa-user":8===t?"fa-ellipsis-h":""),e.appendChild(r)}return t.classList.add("avatar"),e.id="menu",e.appendChild(t),e})(),n=(()=>{const e=document.createElement("div"),t=document.createElement("h1");return e.id="head",e.classList.add("border"),t.innerText="Home",e.appendChild(t),e})(),a=(()=>{const e=document.createElement("div"),t=document.createElement("div"),r=document.createElement("div"),o=document.createElement("span"),n=document.createElement("div"),a=document.createElement("input"),l=document.createElement("div"),c=document.createElement("button"),d=document.createElement("div");e.id="timeline",t.id="main",t.classList.add("border"),r.classList.add("woof","woofbox"),o.classList.add("avatar"),n.classList.add("content"),a.type="text",a.placeholder="What's happening?",a.classList.add("text"),a.id="input",l.classList.add("more"),c.innerText="Woof",c.classList.add("click"),d.classList.add("break");for(let e=0;e<5;e++){const t=document.createElement("i");t.classList.add("click","fas",0==e?"fa-camera":1==e?"fa-image":2==e?"fa-chart-bar":3==e?"fa-smile":4==e?"fa-calendar-alt":""),l.appendChild(t)}return l.appendChild(c),n.append(a,l),r.append(o,n),t.append(r,d),e.appendChild(t),e})();(()=>{const l=document.querySelector("#app");function c(){setTimeout((()=>{Array.from(document.querySelectorAll(".woof.border")).forEach((e=>{const t=e.querySelector(".interact"),o=e.querySelector("h3"),n=e.querySelector("h4");let a,l,d;t.childNodes[0].addEventListener("click",(()=>{const e=t.parentNode.parentNode;let o=Array.from(e.parentNode.querySelectorAll(".woof.border:not(#reply)")).indexOf(e);document.querySelector("#reply")&&document.querySelector("#reply").remove(),d===o?d=null:(e.parentNode.insertBefore((()=>{const e=document.createElement("div"),t=document.createElement("span"),r=document.createElement("div"),o=document.createElement("input"),n=document.createElement("div"),a=document.createElement("button");e.id="reply",e.classList.add("woof","border"),t.classList.add("avatar"),r.classList.add("content"),o.type="text",o.placeholder="Type your response...",o.classList.add("text"),o.id="input",n.classList.add("more"),a.innerText="Woof",a.classList.add("click");for(let e=0;e<5;e++){const t=document.createElement("i");t.classList.add("click","fas",0==e?"fa-camera":1==e?"fa-image":2==e?"fa-chart-bar":3==e?"fa-smile":4==e?"fa-calendar-alt":""),n.appendChild(t)}return n.appendChild(a),r.append(o,n),e.append(t,r),e})(),Array.from(e.parentNode.querySelectorAll(".woof.border"))[o+1]),d=o,document.querySelector("#reply button").addEventListener("click",(()=>{firebase.database().ref("Woofs/").once("value",(t=>{const o=t.val(),n=e.querySelector("h4"),a=e.querySelector("h3");let l;for(const e in o)if(`${new Date(o[e].time)}`.slice(4,15)==n.innerText&&o[e].text==a.innerText){l=o[e];break}const c={text:document.querySelector("#reply input").value,rewoof:0,fav:0};r.writeReplyWoof(l,c,e)?(document.querySelector("#reply").remove(),l.nextWoof.push(c),r.createWoofHTML(l.nextWoof,l.nextWoof.indexOf(c),!0)):console.log("Error, could not append reply.")}))})))})),t.childNodes[1].addEventListener("click",(()=>{firebase.database().ref("Woofs/").once("value",(e=>{const r=e.val();let l;for(const e in r)if(`${new Date(r[e].time)}`.slice(4,15)==n.innerText&&r[e].text==o.innerText){l=r[e];break}l?(a?(l.rewoof--,t.querySelectorAll("i")[1].classList.remove("rewoof")):(l.rewoof++,t.querySelectorAll("i")[1].classList.add("rewoof")),a=!a,t.parentNode.parentNode.id?t.parentNode.querySelectorAll(".inline")[0].innerText=l.rewoof+" Rewoof"+(1===l.rewoof?"":"s"):t.querySelectorAll(".inline")[1].innerText=l.rewoof,firebase.database().ref("Woofs/"+l.id).update(l)):alert("Error, could not find wolf.")}))})),t.childNodes[2].addEventListener("click",(()=>{firebase.database().ref("Woofs/").once("value",(e=>{const r=e.val();let a;for(const e in r)if(`${new Date(r[e].time)}`.slice(4,15)==n.innerText&&r[e].text==o.innerText){a=r[e];break}a?(l?(a.fav--,t.querySelectorAll("i")[2].classList.remove("fav")):(a.fav++,t.querySelectorAll("i")[2].classList.add("fav")),l=!l,t.parentNode.parentNode.id?t.parentNode.querySelectorAll(".inline")[1].innerText=a.fav+" Like"+(1===a.fav?"":"s"):t.querySelectorAll(".inline")[2].innerText=a.fav,firebase.database().ref("Woofs/"+a.id).update(a)):alert("Error, could not find wolf.")}))})),e.querySelector(".text").addEventListener("click",(()=>{if(r.removeWoofs(e,e.parentNode),e.id="focus",e.parentNode.querySelector(".woofbox").classList.add("vanish"),e.parentNode.querySelector(".woofbox").classList.remove("woof"),e.parentNode.querySelector(".break").classList.add("vanish"),!e.parentNode.querySelector("#head i")){const t=document.createElement("i");t.classList.add("fas","fa-arrow-left"),t.addEventListener("click",(()=>{e.parentNode.querySelector(".woofbox").classList.remove("vanish"),e.parentNode.querySelector(".woofbox").classList.add("woof"),e.parentNode.querySelector(".break").classList.remove("vanish"),e.parentNode.querySelector("h1").innerText="Home",t.remove(),e.remove(),r.readWoofs(firebase.database(),r.renderAllWoofs),c()})),e.parentNode.querySelector("#head").insertBefore(t,e.parentNode.querySelector("h1"))}e.parentNode.querySelector("h1").innerText="Woof";let t=e.querySelector("h4");e.querySelector("h4").remove(),e.querySelector(".content").insertBefore(t,e.querySelector(".interact")),t=e.querySelectorAll(".inline");const o=document.createElement("div");o.classList.add("stats"),Array.from(t).forEach((e=>{let r=Array.from(t).indexOf(e);if(1===r||2===r){let t=e.cloneNode(!0);t.innerText+=(1===r?" Rewoof":2===r?" Like":"")+(1!==Number(t.innerText)?"s":""),o.appendChild(t)}e.remove()})),e.querySelector(".content").insertBefore(o,e.querySelector(".interact")),r.readWoofs(firebase.database(),(t=>{const o=e.querySelector("h3"),n=e.querySelector("h4");let a;for(const e in t)if(`${new Date(t[e].time)}`.slice(4,15)==n.innerText&&t[e].text==o.innerText){a=t[e];break}a.nextWoof&&r.renderAllWoofs(a.nextWoof,!0)}))}))}))}),1e3)}a.insertBefore(n,a.querySelector("#main")),l.appendChild(e),e.querySelector("p").addEventListener("click",(()=>{e.remove(),l.appendChild(t)})),t.querySelector("p").addEventListener("click",(()=>{t.remove(),l.appendChild(e)})),e.querySelector("button").addEventListener("click",(()=>{const t=e.querySelector("input"),n=e.querySelectorAll("input")[1];firebase.auth().signInWithEmailAndPassword(t.value,n.value).then((t=>{t.user,e.remove(),l.append(o,a),o.style.left=a.offsetLeft-72+"px",r.readWoofs(firebase.database(),r.renderAllWoofs),c()})).catch((e=>{alert(e)})),t.value="",n.value=""})),t.querySelector("button").addEventListener("click",(()=>{const e=t.querySelector("input"),n=t.querySelectorAll("input")[1];firebase.auth().createUserWithEmailAndPassword(e.value,n.value).then((e=>{e.user,t.remove(),l.append(o,a),o.style.left=a.offsetLeft-72+"px",r.readWoofs(firebase.database(),r.renderAllWoofs),c()})).catch((e=>{alert(e)})),e.value="",n.value=""}))})()})();